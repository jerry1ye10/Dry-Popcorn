{% extends "base.html" %}

{% block title %}
  Search
{% endblock %}

{% block content %}
<div class="main">
  <h1>Search</h1>
  <br>
  {% set msgs = get_flashed_messages(with_categories=true) %}
  {% for category, each in msgs %}
    <p class="{{category}}">{{each}}<p>
  {% endfor %}
  <form action="/search" method="GET">
    <p class="login-info">Type in a city name to find a song based on its weather!</p>
    <input type="text" name="q">
    <br><br>
    <input type="submit" id="submit" name="submit" value="Search">
  </form>
  <br>
  {% if has_searched %}
    <p>Search results for {{city_info.locationName}}, {{city_info.country}} with {{city_info.temp}} degrees F</p>
    <div class="container">
      <div class="row">
        {% for song in song_list %}
            <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
              <div class="song">
              <a class="song-link" href="{{song.url}}">
                <img class="song-image" width="250px" height="250px"
                src="{{song.image}}" alt="Cover Image">
                <br>
                <span class="song-title">{{song.name}}</span>
                <br>
                <span class="song-artist">{{song.artist}}</span>
              </a>
              </div>
            </div>
        {% endfor %}
      </div>
    </div>
  {% endif %}
</div>
{% endblock %}
